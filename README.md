# DBLite - Простая библиотека базы данных

## Обзор

DBLite - это легкая и простая в использовании библиотека базы данных, реализованная на Python. Она предоставляет базовую функциональность для создания, управления и запросов к собственным базам данных. Эта библиотека подходит для небольших проектов и образовательных целей.

## Особенности

- Создание и подключение к файлам базы данных
- Добавление, получение и удаление полей данных
- Поддержка опциональной защиты PIN-кодом
- Простое хранение и извлечение объектов
- Копирование и сериализация базы данных

## Классы

### DataField

Класс `DataField` представляет поле данных в базе данных.

#### Методы

1. `__init__(self, filed_name_: str, id_: Optional[int] = None) -> None`
   - Инициализирует новый экземпляр DataField.
   - Параметры:
     - `filed_name_`: Имя поля.
     - `id_`: Опциональный уникальный идентификатор. Если не предоставлен, будет сгенерирован случайный ID.

2. `check_field_name(self, field_name_: str) -> bool`
   - Проверяет, соответствует ли данное имя поля текущему имени поля.
   - Параметры:
     - `field_name_`: Имя поля для проверки.
   - Возвращает: `True`, если имена совпадают, `False` в противном случае.

3. `get(self, identifier_: int | str) -> object`
   - Извлекает объект из поля, используя его идентификатор.
   - Параметры:
     - `identifier_`: Идентификатор объекта для извлечения.
   - Возвращает: Извлеченный объект.
   - Вызывает: `BaseErrors.ErrorIdentifierNotFound`, если идентификатор не найден.

4. `get_id(self) -> int`
   - Получает уникальный идентификатор поля.
   - Возвращает: Уникальный идентификатор поля.

5. `new_id(self)`
   - Генерирует новый случайный ID для поля.

6. `get_idetifiers(self) -> list[int | str]`
   - Получает список всех идентификаторов в поле.
   - Возвращает: Список всех идентификаторов.

7. `get_objects(self) -> list[object]`
   - Получает список всех объектов в поле.
   - Возвращает: Список всех объектов.

8. `get_name(self) -> str`
   - Получает имя поля.
   - Возвращает: Имя поля.

9. `add(self, identifier_: int | str, obj_: object)`
   - Добавляет объект в поле с заданным идентификатором.
   - Параметры:
     - `identifier_`: Уникальный идентификатор для объекта.
     - `obj_`: Объект, который нужно добавить в поле.
   - Вызывает: `BaseErrors.ErrorObjectIsDataBase`, если объект является экземпляром DataBase.

10. `remove(self, identifier_: int | str)`
    - Удаляет объект из поля, используя его идентификатор.
    - Параметры:
      - `identifier_`: Идентификатор объекта для удаления.
    - Вызывает: `BaseErrors.ErrorIdentifierNotFound`, если идентификатор не найден.

11. `lenght(self) -> int`
    - Получает количество объектов в поле.
    - Возвращает: Количество объектов.

12. `__len__(self) -> int`
    - Получает количество объектов в поле (магический метод).
    - Возвращает: Количество объектов.

### DataBase

Класс `DataBase` представляет базу данных, содержащую несколько DataFields.

#### Методы

1. `__init__(self) -> None`
   - Инициализирует новый экземпляр DataBase.
   - Примечание: Этот метод не должен вызываться напрямую. Используйте `DataBase.create()` или `DataBase.connect()` вместо этого.

2. `__check_pin(self, pin_: Optional[int]) -> bool`
   - Проверяет, соответствует ли данный PIN-код PIN-коду базы данных.
   - Параметры:
     - `pin_`: PIN-код для проверки.
   - Возвращает: `True`, если PIN-коды совпадают или если PIN-код не установлен, `False` в противном случае.

3. `__set_name(self, name_: str)`
   - Устанавливает имя базы данных.
   - Параметры:
     - `name_`: Имя для установки.
   - Возвращает: Текущий экземпляр для цепочки методов.

4. `__set_pin(self, pin_: int)`
   - Устанавливает PIN-код для базы данных.
   - Параметры:
     - `pin_`: PIN-код для установки.
   - Возвращает: Текущий экземпляр для цепочки методов.

5. `__set_data_fileds(self, fields_: list[DataField])`
   - Устанавливает список DataFields для базы данных.
   - Параметры:
     - `fields_`: Список DataFields для установки.

6. `create(cls, name_: str = 'database.dbl', pin_: Optional[int] = None, data_fileds_: list[DataField] = [])`
   - Создает новый файл базы данных.
   - Параметры:
     - `name_`: Имя файла базы данных. По умолчанию 'database.dbl'.
     - `pin_`: Опциональный PIN-код для доступа к базе данных.
     - `data_fileds_`: Список начальных DataFields. По умолчанию пустой список.
   - Возвращает: Новый экземпляр DataBase.

7. `connect(cls, name_: str, pin_: Optional[int] = None)`
   - Подключается к существующему файлу базы данных.
   - Параметры:
     - `name_`: Имя файла базы данных для подключения.
     - `pin_`: PIN-код для доступа к базе данных, если требуется.
   - Возвращает: Подключенный экземпляр DataBase.
   - Вызывает:
     - `BaseErrors.ErrorDataBaseNotFound`, если файл базы данных не найден.
     - `BaseErrors.ErrorPin`, если предоставленный PIN-код неверен.

8. `get_field(self, field_name_: str) -> DataField`
   - Получает DataField по его имени.
   - Параметры:
     - `field_name_`: Имя поля для получения.
   - Возвращает: Запрошенный DataField.
   - Вызывает: `BaseErrors.ErrorFieldNotFound`, если поле не найдено в базе данных.

9. `get_fileds(self) -> list[DataField]`
   - Получает все DataFields в базе данных.
   - Возвращает: Список всех DataFields.

10. `get(self, field_name_: str, identifier_: int | str) -> object`
    - Получает объект из определенного поля, используя его идентификатор.
    - Параметры:
      - `field_name_`: Имя поля.
      - `identifier_`: Идентификатор объекта.
    - Возвращает: Запрошенный объект.
    - Вызывает:
      - `BaseErrors.ErrorFieldNotFound`, если поле не найдено.
      - `BaseErrors.ErrorIdentifierNotFound`, если идентификатор не найден в поле.

11. `get_fields_names(self) -> list[str]`
    - Получает список всех имен полей в базе данных.
    - Возвращает: Список имен полей.

12. `add(self, field_name_: str, obj_: object, identifier_: int | str | None = None)`
    - Добавляет новый объект в определенное поле.
    - Параметры:
      - `field_name_`: Имя поля, в которое нужно добавить объект.
      - `obj_`: Объект для добавления.
      - `identifier_`: Идентификатор для объекта. Если None, будет использован случайный идентификатор.
    - Вызывает: `BaseErrors.ErrorFieldNotFound`, если поле не найдено.

13. `add_field(self, field_name_: str)`
    - Добавляет новое поле в базу данных.
    - Параметры:
      - `field_name_`: Имя нового поля.

14. `pool(self)`
    - Сохраняет текущее состояние базы данных в файл.

15. `remove_field(self, field_name_: str)`
    - Удаляет поле из базы данных.
    - Параметры:
      - `field_name_`: Имя поля для удаления.
    - Вызывает: `BaseErrors.ErrorFieldNotFound`, если поле не найдено в базе данных.

16. `copy(self, new_name_: str = 'copebase.dbl', new_pin_: Optional[int] = None)`
    - Создает копию текущей базы данных с новым именем и опциональным новым PIN-кодом.
    - Параметры:
      - `new_name_`: Имя для нового файла базы данных. По умолчанию 'copebase.dbl'.
      - `new_pin_`: PIN-код для новой базы данных. Если None, PIN-код не устанавливается.
    - Возвращает: Новый объект DataBase, представляющий скопированную базу данных.

### Пример использования

```py
# Создание новой базы данных
db = DataBase.create("mydb.dbl", 1234)

# Добавление нового поля
db.add_field("users")

# Добавление данных в поле
db.add("users", {"name": "Алиса", "age": 30}, 1)
db.add("users", {"name": "Боб", "age": 25}, 2)

# Получение данных
user = db.get("users", 1)
print(user)  # Вывод: {'name': 'Алиса', 'age': 30}

# Сохранение изменений
db.pool()

# Подключение к базе данных позже
db = DataBase.connect("mydb.dbl", 1234)

# Получение всех имен полей
fields = db.get_fields_names()
print(fields)  # Вывод: ['users']

# Копирование базы данных
new_db = db.copy("newdb.dbl", 5678)
```

Эта документация предоставляет всесторонний обзор библиотеки DBLite, объясняя функциональность каждого класса и метода. Пользователи могут обращаться к этому руководству, чтобы понять, как создавать, управлять и взаимодействовать с базами данных, используя библиотеку DBLite.


### Подключение к существующей базе данных
```py
try:
    db = DataBase.connect("mydb.dbl", 1234)
    print("Успешно подключено к базе данных.")

    # Получение и вывод всех пользователей
    users_field = db.get_field("users")
    for user_id in users_field.get_idetifiers():
        user = db.get("users", user_id)
        print(f"Пользователь {user_id}: {user}")

except BaseErrors.ErrorDataBaseNotFound:
    print("Ошибка: Файл базы данных не найден.")
except BaseErrors.ErrorPin:
    print("Ошибка: Предоставлен неверный PIN-код.")
except BaseErrors.ErrorFieldNotFound:
    print("Ошибка: Поле пользователей не найдено в базе данных.")
except Exception as e:
    print(f"Произошла непредвиденная ошибка: {str(e)}")
```

## Лицензия

MIT License

Copyright (c) 2024 Pavlov Ivan

Данная лицензия разрешает лицам, получившим копию данного программного обеспечения и сопутствующей документации (в дальнейшем именуемыми «Программное Обеспечение»), безвозмездно использовать Программное Обеспечение без ограничений, включая неограниченное право на использование, копирование, изменение, слияние, публикацию, распространение, сублицензирование и/или продажу копий Программного Обеспечения, а также лицам, которым предоставляется данное Программное Обеспечение, при соблюдении следующих условий:

Указанное выше уведомление об авторском праве и данные условия должны быть включены во все копии или значимые части данного Программного Обеспечения.

ДАННОЕ ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ ПРЕДОСТАВЛЯЕТСЯ «КАК ЕСТЬ», БЕЗ КАКИХ-ЛИБО ГАРАНТИЙ, ЯВНО ВЫРАЖЕННЫХ ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ ГАРАНТИИ ТОВАРНОЙ ПРИГОДНОСТИ, СООТВЕТСТВИЯ ПО ЕГО КОНКРЕТНОМУ НАЗНАЧЕНИЮ И ОТСУТСТВИЯ НАРУШЕНИЙ, НО НЕ ОГРАНИЧИВАЯСЬ ИМИ. НИ В КАКОМ СЛУЧАЕ АВТОРЫ ИЛИ ПРАВООБЛАДАТЕЛИ НЕ НЕСУТ ОТВЕТСТВЕННОСТИ ПО КАКИМ-ЛИБО ИСКАМ, ЗА УЩЕРБ ИЛИ ПО ИНЫМ ТРЕБОВАНИЯМ, В ТОМ ЧИСЛЕ, ПРИ ДЕЙСТВИИ КОНТРАКТА, ДЕЛИКТЕ ИЛИ ИНОЙ СИТУАЦИИ, ВОЗНИКШИМ ИЗ-ЗА ИСПОЛЬЗОВАНИЯ ПРОГРАММНОГО ОБЕСПЕЧЕНИЯ ИЛИ ИНЫХ ДЕЙСТВИЙ С ПРОГРАММНЫМ ОБЕСПЕЧЕНИЕМ.

